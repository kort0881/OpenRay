# Recommended Clash Meta configuration for Iran - anti-DNS hijack, fake-ip, auto rule-providers, robust region rules

mixed-port: 7892
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
ipv6: false

external-controller: 0.0.0.0:9090
external-ui: ui
external-ui-url: 
  https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip
secret: ''

# Performance Settings
unified-delay: false
tcp-concurrent: true
find-process-mode: strict

# Profile Settings
profile:
  store-selected: true
  store-fake-ip: true

# TUN Configuration for Iran
tun:
  enable: true
  stack: system
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true
  dns-hijack:
  - any:53
  - tcp://any:53
  device: utun0
  mtu: 9000
  strict-route: true
  gso: true
  gso-max-size: 65536

dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
  - '*.lan'
  - '*.local'
  - '*.ir'
  - +.aparat.com
  - +.rubika.ir
  - +.digikala.com
  - +.eitaa.com
  - +.telewebion.ir
  - +.snapp.ir
  - +.shad.ir
  - +.zarinpal.com
  - +.parsian.com
  - +.mellat.ir
  - +.bmi.ir
  - +.postbank.ir
  - +.shetab.ir
  - +.sep.ir
  - +.irna.ir
  - +.isna.ir
  use-hosts: true
  use-system-hosts: false
  respect-rules: true
  default-nameserver:
  - tls://1.1.1.1:853
  - tls://9.9.9.9:853
  nameserver:
  - https://cloudflare-dns.com/dns-query
  - https://dns.google/dns-query
  - https://9.9.9.9/dns-query
  proxy-server-nameserver:
  - https://cloudflare-dns.com/dns-query
  - 1.1.1.1

proxies:
- name: OpenRay  CA-9
  type: vless
  server: 104.17.147.22
  port: 8080
  uuid: Parsashonam-Bot-20
  network: ws
  ws-opts:
    path: 
      /Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam?ed=2056
    headers:
      Host: Fi.Parsashonam.CfD.
- name: OpenRay  CA-11
  type: vless
  server: 104.17.147.22
  port: 8080
  uuid: '%50%61%72%73%61%73%68%6F%6E%61%6D-Bot-20'
  network: ws
  ws-opts:
    path: 
      /Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam?ed=2056
    headers:
      Host: Fi.Parsashonam.CfD.
- name: OpenRay  CA-24
  type: vless
  server: 104.17.147.22
  port: 8080
  uuid: '%50%61%72%73%61%73%68%6F%6E%61%6D-Bot-20'
  network: ws
  ws-opts:
    path: 
      /Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam-Parsashonam?ed=2056
    headers:
      Host: Fi.Parsashonam.CfD.
- name: OpenRay  CA-29
  type: vless
  server: 51.222.158.206
  port: 80
  uuid: cef1e956-e92b-4dbb-999a-6524679f8a40
  network: ws
  ws-opts:
    path: /vless/
    headers:
      Host: '---@External_Net---@External_Net---@External_Net---@External_Net---@External_Net'
- name: OpenRay  CA-151
  type: vmess
  server: 104.17.176.171
  port: 8080
  uuid: vw6hjp6qlg
  alterId: 0
  cipher: auto
  network: ws
  ws-opts:
    path: /download/cdn
    headers:
      Host: vw6hjp6qlg-525340125.zamam.co
- name: OpenRay  CA-152
  type: vless
  server: 172.67.188.18
  port: 80
  uuid: 2cf5523e-c4e2-4e97-be1f-b9b7d356c140
  network: ws
  ws-opts:
    path: /aioproxybot/8.215.59.6-443
    headers:
      Host: aio.loophole.Biz.iD
- name: OpenRay  CA-156
  type: vless
  server: 172.67.188.18
  port: 80
  uuid: 2cf5523e-c4e2-4e97-be1f-b9b7d356c140
  network: ws
  ws-opts:
    path: /aioproxybot/8.215.59.6-443
    headers:
      Host: aio.loophole.Biz.iD
- name: OpenRay  CA-172
  type: vmess
  server: 104.17.176.171
  port: 8080
  uuid: vw6hjp6qlg
  alterId: 0
  cipher: auto
  network: ws
  ws-opts:
    path: /download/cdn
    headers:
      Host: vw6hjp6qlg-525340125.zamam.co
- name: OpenRay Dynamic-2250
  type: vless
  server: all.tellmethetrue.shop
  port: 443
  uuid: 401374e6-df77-41fb-f638-dad8184f175b
  network: grpc
  tls: true
  servername: pqh23v3.hiddendom.shop
- name: OpenRay Dynamic-2251
  type: vless
  server: all.tellmethetrue.shop
  port: 443
  uuid: 401374e6-df77-41fb-f638-dad8184f175b
  network: grpc
  tls: true
  servername: pqh23v4.hiddendom.shop
- name: OpenRay Dynamic-2275
  type: vless
  server: all.tellmethetrue.shop
  port: 443
  uuid: 401374e6-df77-41fb-f638-dad8184f175b
  network: grpc
  tls: true
  servername: pqh29v6.hiddendom.shop
- name: OpenRay Dynamic-2285
  type: vless
  server: all.tellmethetrue.shop
  port: 443
  uuid: 401374e6-df77-41fb-f638-dad8184f175b
  network: grpc
  tls: true
  servername: pqh28v8.hiddendom.shop
- name: OpenRay Dynamic-2310
  type: vless
  server: all.tellmethetrue.shop
  port: 443
  uuid: 401374e6-df77-41fb-f638-dad8184f175b
  network: grpc
  tls: true
  servername: pqh29v6.hiddendom.shop
- name: OpenRay Dynamic-2311
  type: vless
  server: all.tellmethetrue.shop
  port: 443
  uuid: 401374e6-df77-41fb-f638-dad8184f175b
  network: grpc
  tls: true
  servername: pqh28v3.hiddendom.shop
- name: OpenRay Dynamic-2336
  type: vless
  server: all.tellmethetrue.shop
  port: 443
  uuid: 401374e6-df77-41fb-f638-dad8184f175b
  network: grpc
  tls: true
  servername: pqh28v3.hiddendom.shop
- name: OpenRay Dynamic-2353
  type: vless
  server: all.tellmethetrue.shop
  port: 443
  uuid: 401374e6-df77-41fb-f638-dad8184f175b
  network: grpc
  tls: true
  servername: pqh29v1.hiddendom.shop
- name: OpenRay Dynamic-2729
  type: vless
  server: all.tellmethetrue.shop
  port: 443
  uuid: 401374e6-df77-41fb-f638-dad8184f175b
  network: grpc
  tls: true
  servername: pqh23v5.hiddendom.shop
- name: OpenRay Dynamic-2730
  type: vless
  server: all.tellmethetrue.shop
  port: 443
  uuid: 401374e6-df77-41fb-f638-dad8184f175b
  network: grpc
  tls: true
  servername: pqh24v7.hiddendom.shop
- name: OpenRay Dynamic-2731
  type: vless
  server: all.tellmethetrue.shop
  port: 443
  uuid: 401374e6-df77-41fb-f638-dad8184f175b
  network: grpc
  tls: true
  servername: pqh28v8.hiddendom.shop
- name: OpenRay Dynamic-2790
  type: vless
  server: all.tellmethetrue.shop
  port: 443
  uuid: 401374e6-df77-41fb-f638-dad8184f175b
  network: grpc
  tls: true
  servername: pqh23v3.hiddendom.shop
- name: OpenRay Dynamic-2792
  type: vless
  server: all.tellmethetrue.shop
  port: 443
  uuid: 401374e6-df77-41fb-f638-dad8184f175b
  network: grpc
  tls: true
  servername: pqh24v6.hiddendom.shop
- name: OpenRay Dynamic-2799
  type: vless
  server: all.tellmethetrue.shop
  port: 443
  uuid: 401374e6-df77-41fb-f638-dad8184f175b
  network: grpc
  tls: true
  servername: pqh28v3.hiddendom.shop
- name: OpenRay Dynamic-2816
  type: vless
  server: all.tellmethetrue.shop
  port: 443
  uuid: 401374e6-df77-41fb-f638-dad8184f175b
  network: grpc
  tls: true
  servername: pqh30v3.hiddendom.shop

proxy-groups:
- name: AUTO
  type: url-test
  url: https://www.gstatic.com/generate_204
  interval: 300
  tolerance: 50
  proxies:
  - OpenRay  CA-9
  - OpenRay  CA-11
  - OpenRay  CA-24
  - OpenRay  CA-29
  - OpenRay  CA-151
  - OpenRay  CA-152
  - OpenRay  CA-156
  - OpenRay  CA-172
  - OpenRay Dynamic-2250
  - OpenRay Dynamic-2251
  - OpenRay Dynamic-2275
  - OpenRay Dynamic-2285
  - OpenRay Dynamic-2310
  - OpenRay Dynamic-2311
  - OpenRay Dynamic-2336
  - OpenRay Dynamic-2353
  - OpenRay Dynamic-2729
  - OpenRay Dynamic-2730
  - OpenRay Dynamic-2731
  - OpenRay Dynamic-2790
  - OpenRay Dynamic-2792
  - OpenRay Dynamic-2799
  - OpenRay Dynamic-2816
- name: PROXY
  type: select
  proxies:
  - AUTO
  - OpenRay  CA-9
  - OpenRay  CA-11
  - OpenRay  CA-24
  - OpenRay  CA-29
  - OpenRay  CA-151
  - OpenRay  CA-152
  - OpenRay  CA-156
  - OpenRay  CA-172
  - OpenRay Dynamic-2250
  - OpenRay Dynamic-2251
  - OpenRay Dynamic-2275
  - OpenRay Dynamic-2285
  - OpenRay Dynamic-2310
  - OpenRay Dynamic-2311
  - OpenRay Dynamic-2336
  - OpenRay Dynamic-2353
  - OpenRay Dynamic-2729
  - OpenRay Dynamic-2730
  - OpenRay Dynamic-2731
  - OpenRay Dynamic-2790
  - OpenRay Dynamic-2792
  - OpenRay Dynamic-2799
  - OpenRay Dynamic-2816
rules:
- DOMAIN-SUFFIX,ir,DIRECT
- DOMAIN-SUFFIX,aparat.com,DIRECT
- DOMAIN-SUFFIX,digikala.com,DIRECT
- DOMAIN-SUFFIX,divar.ir,DIRECT
- DOMAIN-SUFFIX,eitaa.com,DIRECT
- DOMAIN-SUFFIX,rubika.ir,DIRECT
- DOMAIN-SUFFIX,snapp.ir,DIRECT
- DOMAIN-SUFFIX,zarinpal.com,DIRECT
- DOMAIN-SUFFIX,parsian.com,DIRECT
- DOMAIN-SUFFIX,mellat.ir,DIRECT
- DOMAIN-SUFFIX,bmi.ir,DIRECT
- DOMAIN-SUFFIX,postbank.ir,DIRECT
- DOMAIN-SUFFIX,shetab.ir,DIRECT
- DOMAIN-SUFFIX,sep.ir,DIRECT
- DOMAIN-SUFFIX,irna.ir,DIRECT
- DOMAIN-SUFFIX,isna.ir,DIRECT
- GEOSITE,GOOGLE,PROXY
- GEOSITE,YOUTUBE,PROXY
- GEOSITE,FACEBOOK,PROXY
- GEOSITE,INSTAGRAM,PROXY
- GEOSITE,TWITTER,PROXY
- GEOSITE,TELEGRAM,PROXY
- GEOSITE,GITHUB,PROXY
- GEOSITE,CLOUDFLARE,PROXY
- GEOSITE,NETFLIX,PROXY
- GEOSITE,SPOTIFY,PROXY
- GEOSITE,CATEGORY-ADS-ALL,REJECT
- GEOSITE,GEOLOCATION-!CN,PROXY
- GEOIP,PRIVATE,DIRECT
- MATCH,PROXY
hosts:
  dns.google: [8.8.8.8, 8.8.4.4]
  cloudflare-dns.com: [1.1.1.1, 1.0.0.1]
  1dot1dot1dot1.cloudflare-dns.com: [1.1.1.1, 1.0.0.1]
  www.google.com: [142.250.191.36]
  youtube.com: [142.250.191.14]
  www.youtube.com: [142.250.191.14]
  facebook.com: [157.240.11.35]
  www.facebook.com: [157.240.11.35]
  twitter.com: [104.244.42.193]
  www.twitter.com: [104.244.42.193]
  x.com: [104.244.42.193]
